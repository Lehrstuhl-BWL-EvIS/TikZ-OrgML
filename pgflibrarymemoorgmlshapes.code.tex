%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
%~~  __  __ ___ __  __  ___     ___           __  __ _    
%~~ |  \/  | __|  \/  |/ _ \   / _ \ _ _ __ _|  \/  | |   
%~~ | |\/| | _|| |\/| | (_) | | (_) | '_/ _` | |\/| | |__ 
%~~ |_|  |_|___|_|  |_|\___/   \___/|_| \__, |_|  |_|____|
%~~                                     |___/             
%~~  ___ _                      
%~~ / __| |_  __ _ _ __  ___ ___
%~~ \__ \ ' \/ _` | '_ \/ -_|_-<
%~~ |___/_||_\__,_| .__/\___/__/
%~~               |_|   
%~~
%~~ Implementierung der MEMO OrgML Notationssymbole als Shapes für TikZ-Nodes
%~~ 
%~~ Fabian Schneider (fabian.schneider@studium.fernuni-hagen.de)
%~~
%~~ ##########################################################################
%~~ Implementierung der Shapes und Definiton der Farben
%~~ ##########################################################################
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
%~~ Farben
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
\definecolor{event}{RGB}{198,212,220}
\definecolor{startevent}{RGB}{162,180,0}
\definecolor{endevent}{RGB}{200,0,52}
\definecolor{iterationstart}{RGB}{153,193,66}
\definecolor{timesborder}{RGB}{198,212,220}
\definecolor{until}{RGB}{200,0,52}
\definecolor{border}{RGB}{20,18,21}
\definecolor{briefcase}{RGB}{255,253,232}
\definecolor{plus}{RGB}{102,158,44}  
\definecolor{pencil}{RGB}{0,143,204}     
\definecolor{cross}{RGB}{223,11,37}   
\definecolor{loaded}{RGB}{219,229,240}
\definecolor{line}{RGB}{17,66,81}  
\definecolor{background}{RGB}{198,212,220}
\definecolor{beige}{RGB}{255,253,232}
\definecolor{syncfill}{RGB}{218,229,235}
\definecolor{syncedge}{RGB}{4,66,84}
\definecolor{text}{RGB}{4,66,84}
\definecolor{iterationarrow}{RGB}{255,255,255}
\definecolor{bottomgrey}{RGB}{231,231,232}
\definecolor{fillorange}{RGB}{235,105,11}
\definecolor{decisiongrey}{RGB}{135,136,138}

%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
%~~ Definition der MEMO OrgML-Shapes
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

\makeatletter
%~~ ######################################
%~~ EREIGNISSE
%~~ ######################################

%~~ Basisereignis
\pgfdeclareshape{event}{
    %~~ Übernahme der Anchor aus dem standard Rechteck
    %~~ Shape
    \inheritsavedanchors[from=rectangle]  	        
	\inheritanchorborder[from=rectangle] 
	\inheritanchor[from=rectangle]{center} 
	\inheritanchor[from=rectangle]{north}
 	\inheritanchor[from=rectangle]{south} 
	\inheritanchor[from=rectangle]{west} 
	\inheritanchor[from=rectangle]{east}

    
    %~~ Hintergrundpfad des Basisereignisses       
	\backgroundpath{
        %~~ Speichern der Werte der Anker in den 
        %~~ temporären PGF Registern xa,ya und xb und yb
	    \southwest \pgf@xa=\pgf@x \pgf@ya=\pgf@y
	    \northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y
			    
	    %~~ Setzen der Linienstärke
		\pgfsetlinewidth{0.75pt}
									
        %~~ Erzeugen der äußeren Kanten des Notationssymbols
        %~~ mit Hilfe eines Path (Dreieck}
        \pgfpathmoveto{\pgfpoint{\pgf@xa}{\pgf@yb}}   
        \pgfpathlineto{\pgfpoint{\pgf@xb}{\pgf@yb}}
        \pgfpathlineto{\pgfpoint{\pgf@xb*0}{\pgf@ya}}
        \pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@yb}}
    	    	    			
    	%~~ Erzeugen des Pfades
    	\pgfusepath{stroke} 	
    			
    	%~~ Abschluss des Pfades   		
    	\pgfpathclose  	    				
    }
}

%~~ Bezeichner für spezielle Ereignisse:
%~~ ?????event, z.B. startevent, endevent, etc.

%~~ Startereignis
\pgfdeclareshape{startevent}{
    %~~ Die Anchor werden aus dem Basisshape für Events
    %~~ geerbt
	\inheritsavedanchors[from=event]  	        
	\inheritanchorborder[from=event] 
	\inheritanchor[from=event]{center} 
	\inheritanchor[from=event]{north}
 	\inheritanchor[from=event]{south} 
	\inheritanchor[from=event]{west} 
	\inheritanchor[from=event]{east}
	
	
	%~~ Erben des Hintergrundpfades aus dem Basisshape
	%~~ für Events
	\inheritbackgroundpath[from=event]
	
	%~~ Erzeugen des Textes "START" überhalb des Events
	\beforebackgroundpath{
	    %~~ Speichern der Werte der Anker in den 
        %~~ temporären PGF Registern xa,ya und xb und yb
	    \southwest \pgf@xa=\pgf@x \pgf@ya=\pgf@y
	    \northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y
	
	    %~~ Erzeugen des Textes über dem Dreieck
	    %~~ Die Positionierung erfolgt dabei relativ zu den Ankern
    	\pgftext[left, x=\pgf@xb*-.2, y=\pgf@yb*1.25]{\textsf{\fontsize{1}{5}\selectfont START}}
	}
}

%~~ Endereignis
\pgfdeclareshape{endevent}{
    %~~ Die Anchor werden aus dem Basisshape für Events
    %~~ geerbt
	\inheritsavedanchors[from=event]  	        
	\inheritanchorborder[from=event] 
	\inheritanchor[from=event]{center} 
	\inheritanchor[from=event]{north}
 	\inheritanchor[from=event]{south} 
	\inheritanchor[from=event]{west} 
	\inheritanchor[from=event]{east}
	
	
	%~~ Erben des Hintergrundpfades aus dem Basisshape
	%~~ für Events
	\inheritbackgroundpath[from=event]
	
	%~~ Erzeugen des Textes "STOP" überhalb des Events
	\beforebackgroundpath{
	    %~~ Speichern der Werte der Anker in den 
        %~~ temporären PGF Registern xa,ya und xb und yb
	    \southwest \pgf@xa=\pgf@x \pgf@ya=\pgf@y
	    \northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y
	
	    %~~ Erzeugen des Textes über dem Dreieck
	    %~~ Die Positionierung erfolgt dabei relativ zu den Ankern
    	\pgftext[left, x=\pgf@xb*-0.1, y=\pgf@yb*1.25]{\textsf{\fontsize{1}{5}\selectfont STOP}}
	}
}

%~~ Nachricht eingegangen
\pgfdeclareshape{messageevent}{
    %~~ Die Anchor werden aus dem Basisshape für Events
    %~~ geerbt
	\inheritsavedanchors[from=event]  	        
	\inheritanchorborder[from=event] 
	\inheritanchor[from=event]{center} 
	\inheritanchor[from=event]{north}
 	\inheritanchor[from=event]{south} 
	\inheritanchor[from=event]{west} 
	\inheritanchor[from=event]{east}
	
	
	%~~ Erben des Hintergrundpfades aus dem Basisshape
	%~~ für Events
	\inheritbackgroundpath[from=event]
	
	%~~ Erzeugen des Briefumschlages 
	\beforebackgroundpath{
	    %~~ Speichern der Werte der Anker in den 
        %~~ temporären PGF Registern xa,ya und xb und yb
	    \southwest \pgf@xa=\pgf@x \pgf@ya=\pgf@y
	    \northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y
    	
    	%~~ Definition der Farben für den Briefumschlag und
    	%~~ den Hintergrund    	
    	\pgfsetcolor{border}
    	%~~ Hintergrund
    	\pgfsetfillcolor{white}
    	
    	%~~ Rahmen für den Briefumschlag
    	\begin{pgfscope}
    	    %~~ Die äußere Linienstärke wird innerhalb des Scope
    	    %~~ definiert
    	    \pgfsetlinewidth{0.75pt}
    	    \pgfpathmoveto{\pgfpoint{\pgf@xb*-0.75}{\pgf@yb*0.75}}   
            \pgfpathlineto{\pgfpoint{\pgf@xb*0.75}{\pgf@yb*0.75}}
            \pgfpathlineto{\pgfpoint{\pgf@xb*0.75}{\pgf@yb*-0.35}}
            \pgfpathlineto{\pgfpoint{\pgf@xb*-0.75}{\pgf@yb*-0.35}}
            \pgfpathlineto{\pgfpoint{\pgf@xb*-0.75}{\pgf@yb*0.75}}
            \pgfusepath{stroke,fill}
        \end{pgfscope}
        
        %~~ Faltkanten des Briefumschlges
	    \pgfpathmoveto{\pgfpoint{\pgf@xb*-0.75}{\pgf@yb*0.75}}
	    \pgfpathlineto{\pgfpoint{\pgf@xb*0}{\pgf@yb*0.15}}
	    \pgfpathlineto{\pgfpoint{\pgf@xb*0.75}{\pgf@yb*0.75}}
	    
	    \pgfpathmoveto{\pgfpoint{\pgf@xb*-0.75}{\pgf@yb*-0.35}}
	    \pgfpathlineto{\pgfpoint{\pgf@xb*-0.15}{\pgf@yb*0.25}}
	    
	    \pgfpathmoveto{\pgfpoint{\pgf@xb*0.75}{\pgf@yb*-0.35}}
	    \pgfpathlineto{\pgfpoint{\pgf@xb*0.15}{\pgf@yb*0.25}}        
	    
    	\pgfusepath{stroke}
    	
    	\pgfpathclose
	}
}

%~~ Relevante Änderung des Informationszustandes
\pgfdeclareshape{informationchangeevent}{
    %~~ Die Anchor werden aus dem Basisshape für Events
    %~~ geerbt
	\inheritsavedanchors[from=event]  	        
	\inheritanchorborder[from=event] 
	\inheritanchor[from=event]{center} 
	\inheritanchor[from=event]{north}
 	\inheritanchor[from=event]{south} 
	\inheritanchor[from=event]{west} 
	\inheritanchor[from=event]{east}
	
	
	%~~ Erben des Hintergrundpfades aus dem Basisshape
	%~~ für Events
	\inheritbackgroundpath[from=event]
	
	%~~ Erzeugen des Aktensymbols 
	\beforebackgroundpath{
	    %~~ Speichern der Werte der Anker in den 
        %~~ temporären PGF Registern xa,ya und xb und yb
	    \southwest \pgf@xa=\pgf@x \pgf@ya=\pgf@y
	    \northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y
    	  	  	
    	\pgfsetcolor{border}
    	
    	%~~ Erzeugen des schwarzen Hintergrundes, der signalisiert,
    	%~~ das die Aktenmappe geöffnet ist
    	\begin{pgfscope}
            \pgfsetfillcolor{border}
            \pgfpathmoveto{\pgfpoint{\pgf@xb*-0.63}{\pgf@yb*0.75}}   
            \pgfpathlineto{\pgfpoint{\pgf@xb*-0.25}{\pgf@yb*0.75}}
            \pgfpathlineto{\pgfpoint{\pgf@xb*-0.26}{\pgf@yb*0.65}}
            \pgfpathlineto{\pgfpoint{\pgf@xb*0.75}{\pgf@yb*0.65}}
            \pgfpathlineto{\pgfpoint{\pgf@xb*0.65}{\pgf@yb*-0.35}}
            \pgfpathlineto{\pgfpoint{\pgf@xb*-0.65}{\pgf@yb*-0.35}}
            \pgfpathlineto{\pgfpoint{\pgf@xb*-0.63}{\pgf@yb*0.75}}
            \pgfusepath{stroke,fill}
        \end{pgfscope}  
            	
    	%~~ Erzeugen des Deckblatts der Aktenmappe
    	\begin{pgfscope}
    	    %~~ Setzen der Farbe
    	    \pgfsetfillcolor{briefcase}
    	    \pgfpathmoveto{\pgfpoint{\pgf@xb*-0.75}{\pgf@yb*0.65}}   
            \pgfpathlineto{\pgfpoint{\pgf@xb*-0.35}{\pgf@yb*0.65}}
            \pgfpathlineto{\pgfpoint{\pgf@xb*-0.35}{\pgf@yb*0.55}}
            \pgfpathlineto{\pgfpoint{\pgf@xb*0.65}{\pgf@yb*0.55}}  
            \pgfpathlineto{\pgfpoint{\pgf@xb*0.65}{\pgf@yb*-0.35}}
            \pgfpathlineto{\pgfpoint{\pgf@xb*-0.75}{\pgf@yb*-0.35}}          
            \pgfpathlineto{\pgfpoint{\pgf@xb*-0.75}{\pgf@yb*0.65}}
            \pgfusepath{stroke,fill}
        \end{pgfscope}        
            	
    	\pgfpathclose
	}
}

%~~ Änderung - NEU
\pgfdeclareshape{newevent}{
    %~~ Die Anchor werden aus dem Basisshape für Events
    %~~ geerbt
    \inheritsavedanchors[from=informationchangeevent]            
    \inheritanchorborder[from=informationchangeevent] 
    \inheritanchor[from=informationchangeevent]{center} 
    \inheritanchor[from=informationchangeevent]{north}
    \inheritanchor[from=informationchangeevent]{south} 
    \inheritanchor[from=informationchangeevent]{west} 
    \inheritanchor[from=informationchangeevent]{east}
    
    
    %~~ Erben des Hintergrundpfades aus dem Basisshape
    %~~ für Events
    \inheritbackgroundpath[from=event]

    %~~ Erben des Vor-Hintergrundpfades aus dem
    %~~ Event der Änderungen des Informationszustandes
    \inheritbeforebackgroundpath[from=informationchangeevent]
    
    %~~ Erzeugen des Pluszeichens
    \beforeforegroundpath{
        %~~ Speichern der Werte der Anker in den 
        %~~ temporären PGF Registern xa,ya und xb und yb
        \southwest \pgf@xa=\pgf@x \pgf@ya=\pgf@y
        \northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y                        
               
        %~~ Erzeugen des Kreises
        \begin{pgfscope}
            \pgfsetcolor{plus}
            \pgfsetfillcolor{white}
            \pgfsetlinewidth{0.75pt}
            \pgfpathcircle{\pgfpoint{\pgf@xb*0.6}{\pgf@yb*0.65}}{3pt}
            \pgfusepath{fill,stroke}
        \end{pgfscope}
        
        %~~ Erzeugen des Plussymbols
        \begin{pgfscope}
            \pgfsetcolor{plus}            
            \pgfsetlinewidth{0.65pt}
            \pgfpathmoveto{\pgfpoint{\pgf@xb*0.6}{\pgf@yb*0.8}}
            \pgfpathlineto{\pgfpoint{\pgf@xb*0.6}{\pgf@yb*0.5}}            
            \pgfusepath{stroke}    
        \end{pgfscope}
        
        \begin{pgfscope}
            \pgfsetcolor{plus}
            \pgfsetlinewidth{0.65pt}
            \pgfpathmoveto{\pgfpoint{\pgf@xb*0.45}{\pgf@yb*0.65}}
            \pgfpathlineto{\pgfpoint{\pgf@xb*0.75}{\pgf@yb*0.65}}
            \pgfusepath{stroke}    
        \end{pgfscope}
                        
        \pgfpathclose
    }
}


%~~ Änderung - Modifiziert
\pgfdeclareshape{modifiedevent}{
    %~~ Die Anchor werden aus dem Basisshape für Events
    %~~ geerbt
    \inheritsavedanchors[from=informationchangeevent]            
    \inheritanchorborder[from=informationchangeevent] 
    \inheritanchor[from=informationchangeevent]{center} 
    \inheritanchor[from=informationchangeevent]{north}
    \inheritanchor[from=informationchangeevent]{south} 
    \inheritanchor[from=informationchangeevent]{west} 
    \inheritanchor[from=informationchangeevent]{east}
    
    
    %~~ Erben des Hintergrundpfades aus dem Basisshape
    %~~ für Events
    \inheritbackgroundpath[from=event]

    %~~ Erben des Vor-Hintergrundpfades aus dem
    %~~ Event der Änderungen des Informationszustandes
    \inheritbeforebackgroundpath[from=informationchangeevent]
    
    %~~ Erzeugen des Stiftes 
    \beforeforegroundpath{
        %~~ Speichern der Werte der Anker in den 
        %~~ temporären PGF Registern xa,ya und xb und yb
        \southwest \pgf@xa=\pgf@x \pgf@ya=\pgf@y
        \northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y     
                 
        %~~ Erzeugen der weißen Umrandung
        \begin{pgfscope}
            \pgfsetlinewidth{2.2pt}
            \pgfsetstrokecolor{white}
            \pgfpathmoveto{\pgfpoint{\pgf@xb*0.25}{\pgf@yb*0.25}}         
            \pgfpathlineto{\pgfpoint{\pgf@xb*0.95}{\pgf@yb*1.1}}                   
                   
            \pgfpathmoveto{\pgfpoint{\pgf@xb*1.1}{\pgf@yb*0.97}}                
            \pgfpathlineto{\pgfpoint{\pgf@xb*0.4}{\pgf@yb*0.16}}                     
            
            \pgfpathmoveto{\pgfpoint{\pgf@xb*0.94}{\pgf@yb*1.09}}             
            \pgfpathquadraticcurveto{\pgfpoint{\pgf@xb*1.1}{\pgf@yb*1.31}}{\pgfpoint{\pgf@xb*1.095}{\pgf@yb*0.96}}
           
            \pgfusepath{stroke}
        \end{pgfscope}        
        
        %~~ Erzeugen des inneren Teils des Stifts mit der Hintergrundfarbe
        \begin{pgfscope}
            \pgfsetlinewidth{0.3pt}
            \pgfsetstrokecolor{pencil}
            \pgfsetfillcolor{pencil}
            \pgfpathmoveto{\pgfpoint{\pgf@xb*0.25}{\pgf@yb*0.25}}         
            \pgfpathlineto{\pgfpoint{\pgf@xb*0.95}{\pgf@yb*1.1}}
        
            %~~ Abschluss            
            \pgfpathlineto{\pgfpoint{\pgf@xb*1.1}{\pgf@yb*0.97}}    
                   
            \pgfpathmoveto{\pgfpoint{\pgf@xb*1.1}{\pgf@yb*0.97}}                
            \pgfpathlineto{\pgfpoint{\pgf@xb*0.4}{\pgf@yb*0.16}}             
            
            %~~ Abschluss
            \pgfpathlineto{\pgfpoint{\pgf@xb*0.25}{\pgf@yb*0.25}}
            
            \pgfpathmoveto{\pgfpoint{\pgf@xb*0.94}{\pgf@yb*1.09}}             
            \pgfpathquadraticcurveto{\pgfpoint{\pgf@xb*1.1}{\pgf@yb*1.31}}{\pgfpoint{\pgf@xb*1.095}{\pgf@yb*0.96}}
           
            \pgfusepath{stroke,fill}
        \end{pgfscope}
        
        %~~ Erzeugen der Umrandung des Stifts
        \begin{pgfscope}
            \pgfsetlinewidth{0.5pt}
            \pgfsetstrokecolor{black}      
            \pgfpathmoveto{\pgfpoint{\pgf@xb*0.25}{\pgf@yb*0.25}}         
            \pgfpathlineto{\pgfpoint{\pgf@xb*0.95}{\pgf@yb*1.1}}
                           
            \pgfpathmoveto{\pgfpoint{\pgf@xb*1.1}{\pgf@yb*0.97}}                
            \pgfpathlineto{\pgfpoint{\pgf@xb*0.4}{\pgf@yb*0.16}}                       
            
            \pgfpathmoveto{\pgfpoint{\pgf@xb*0.94}{\pgf@yb*1.09}}             
            \pgfpathquadraticcurveto{\pgfpoint{\pgf@xb*1.1}{\pgf@yb*1.31}}{\pgfpoint{\pgf@xb*1.095}{\pgf@yb*0.96}}
           
            \pgfusepath{stroke}
        \end{pgfscope}        
        
        %~~ Erzeugen der weißen Umrandung des Stiftes
        \begin{pgfscope}
            \pgfsetlinewidth{1.5pt}
            \pgfsetstrokecolor{white}
            \pgfpathmoveto{\pgfpoint{\pgf@xb*0.22}{\pgf@yb*0.25}}  
            \pgfpathlineto{\pgfpoint{\pgf@xb*0.15}{\pgf@ya*0.02}}
            \pgfpathlineto{\pgfpoint{\pgf@xb*0.39}{\pgf@yb*0.14}}
            \pgfusepath{stroke}    
        \end{pgfscope}
        
        %~~ Erzeugen der Spitze des Stifts
        \begin{pgfscope}
            \pgfsetlinewidth{0.5pt}
            \pgfsetfillcolor{white}
            \pgfsetstrokecolor{black}
            \pgfpathmoveto{\pgfpoint{\pgf@xb*0.25}{\pgf@yb*0.25}}  
            \pgfpathlineto{\pgfpoint{\pgf@xb*0.15}{\pgf@ya*0.02}}
            \pgfpathlineto{\pgfpoint{\pgf@xb*0.4}{\pgf@yb*0.16}}
            \pgfusepath{stroke, fill}    
        \end{pgfscope}
              
        %~~ Erzeugen des Stifthalters
        \begin{pgfscope}
            \pgfsetlinewidth{0.4pt}
            \pgfsetstrokecolor{black}
            \pgfpathmoveto{\pgfpoint{\pgf@xb*0.55}{\pgf@yb*0.7}}  
            \pgfpathlineto{\pgfpoint{\pgf@xb*0.85}{\pgf@yb*1.07}} 
            \pgfusepath{stroke}
        \end{pgfscope}

        %~~ Trenner für die Spitze des Stifes einfügen
        \begin{pgfscope}
            \pgfsetstrokecolor{white}
            \pgfpathmoveto{\pgfpoint{1.8}{0.4}}
            \pgfarc{190}{280}{0.2ex}
            \pgfusepath{stroke}    
        \end{pgfscope}

                        
        \pgfpathclose
    }
}


%~~ Änderung - Abgebrochen
\pgfdeclareshape{canceledevent}{
   %~~ Die Anchor werden aus dem Basisshape für Events
    %~~ geerbt
    \inheritsavedanchors[from=informationchangeevent]            
    \inheritanchorborder[from=informationchangeevent] 
    \inheritanchor[from=informationchangeevent]{center} 
    \inheritanchor[from=informationchangeevent]{north}
    \inheritanchor[from=informationchangeevent]{south} 
    \inheritanchor[from=informationchangeevent]{west} 
    \inheritanchor[from=informationchangeevent]{east}
    
    
    %~~ Erben des Hintergrundpfades aus dem Basisshape
    %~~ für Events
    \inheritbackgroundpath[from=event]

    %~~ Erben des Vor-Hintergrundpfades aus dem
    %~~ Event der Änderungen des Informationszustandes
    \inheritbeforebackgroundpath[from=informationchangeevent]
    
    %~~ Erzeugen des Aktensymbols 
    \beforeforegroundpath{
        %~~ Speichern der Werte der Anker in den 
        %~~ temporären PGF Registern xa,ya und xb und yb
        \southwest \pgf@xa=\pgf@x \pgf@ya=\pgf@y
        \northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y                                            
        
        %~~ Erzeugen des Kreises
        \begin{pgfscope}
            \pgfsetcolor{cross}
            \pgfsetfillcolor{white}
            \pgfsetlinewidth{0.75pt}
            \pgfpathcircle{\pgfpoint{\pgf@xb*0.6}{\pgf@yb*0.65}}{3pt}
            \pgfusepath{fill,stroke}
        \end{pgfscope}
        
        %~~ Erzeugen des Kreuzes
        \begin{pgfscope}
            \pgfsetcolor{cross}            
            \pgfsetlinewidth{0.65pt}
            \pgfpathmoveto{\pgfpoint{\pgf@xb*0.5}{\pgf@yb*0.75}}
            \pgfpathlineto{\pgfpoint{\pgf@xb*0.7}{\pgf@yb*0.55}}            
            \pgfusepath{stroke}    
        \end{pgfscope}
        
        \begin{pgfscope}
            \pgfsetcolor{cross}
            \pgfsetlinewidth{0.65pt}
            \pgfpathmoveto{\pgfpoint{\pgf@xb*0.5}{\pgf@yb*0.55}}
            \pgfpathlineto{\pgfpoint{\pgf@xb*0.7}{\pgf@yb*0.75}}
            \pgfusepath{stroke}    
        \end{pgfscope}
        
        %~~ Erzeugen der Linien in der Aktentasche
        \begin{pgfscope}
            \pgfsetcolor{border}
            \pgfsetlinewidth{0.25pt}
            \pgfpathmoveto{\pgfpoint{\pgf@xb*-0.65}{\pgf@ya*-0.35}}
            \pgfpathlineto{\pgfpoint{\pgf@xb*0.25}{\pgf@ya*-0.35}}
            \pgfpathmoveto{\pgfpoint{\pgf@xb*-0.65}{\pgf@ya*-0.20}}
            \pgfpathlineto{\pgfpoint{\pgf@xb*0.25}{\pgf@ya*-0.20}}
            \pgfpathmoveto{\pgfpoint{\pgf@xb*-0.65}{\pgf@ya*-0.05}}
            \pgfpathlineto{\pgfpoint{\pgf@xb*0.25}{\pgf@ya*-0.05}}
            \pgfusepath{stroke}    
        \end{pgfscope}

                        
        \pgfpathclose
    }
}


%~~ Überladen
\pgfdeclareshape{loadedevent}{
    %~~ Die Anchor werden aus dem Basisshape für Events
    %~~ geerbt
    \inheritsavedanchors[from=informationchangeevent]            
    \inheritanchorborder[from=informationchangeevent] 
    \inheritanchor[from=informationchangeevent]{center} 
    \inheritanchor[from=informationchangeevent]{north}
    \inheritanchor[from=informationchangeevent]{south} 
    \inheritanchor[from=informationchangeevent]{west} 
    \inheritanchor[from=informationchangeevent]{east}
    
    
    %~~ Erben des Hintergrundpfades aus dem Basisshape
    %~~ für Events
    \inheritbackgroundpath[from=event]

    %~~ Erben des Vor-Hintergrundpfades aus dem
    %~~ Event der Änderungen des Informationszustandes
    \inheritbeforebackgroundpath[from=informationchangeevent]
    
    %~~ Erzeugen des Aktensymbols 
    \beforeforegroundpath{
        %~~ Speichern der Werte der Anker in den 
        %~~ temporären PGF Registern xa,ya und xb und yb
        \southwest \pgf@xa=\pgf@x \pgf@ya=\pgf@y
        \northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y                    
        
        %~~ Erzeugen des "LOADED"-Schriftzuges unter dem Symbol
        \begin{pgfscope}
            \pgfsetcolor{line}
            \pgfsetfillcolor{loaded}
            
            \pgfsetcornersarced{\pgfpoint{2pt}{2pt}}
            \pgfpathrectangle{\pgfpoint{\pgf@xa*-0.5}{\pgf@ya*-2.6}}{\pgfpoint{\pgf@xa*2.25}{\pgf@yb*0.7}}
            
            \pgfusepath{fill,stroke}  
        \end{pgfscope}
        
        %~~ "LOADED"-Schriftzug
        \begin{pgfscope}
            \pgfsetcolor{line}
            \pgftext[center, x=\pgf@xa*0, y=\pgf@ya*1.45]{\textsf{\fontsize{6}{7}\selectfont LOADED}}      
        \end{pgfscope}
                
        \pgfpathclose
    }
}

%~~ ######################################
%~~ PROZESSE
%~~ ######################################

%~~ Unspezifizierter Prozess
\pgfdeclareshape{unspecifiedprocess}{
    %~~ Übernahme der Anchors aus dem
    %~~ Rechteck
	\inheritsavedanchors[from=rectangle]  	        
	\inheritanchorborder[from=rectangle] 
	\inheritanchor[from=rectangle]{center} 
	\inheritanchor[from=rectangle]{north}
 	\inheritanchor[from=rectangle]{south} 
	\inheritanchor[from=rectangle]{west} 
	\inheritanchor[from=rectangle]{east}
            
	%~~ Hintergrundpfad des Basisprozesses
	\backgroundpath{
        %~~ Speichern der Werte der Anker in den 
        %~~ temporären PGF RegistBlogern xa,ya und xb und yb
		\southwest \pgf@xa=\pgf@x \pgf@ya=\pgf@y
		\northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y
				
		%~~ Definition der Farbe für die Linien und
		%~~ den Hintergrund des Shapes		
		\pgfsetcolor{background}
				
    	%~~ Erzeugen des Notationssymbols eines
    	%~~ unspezifierten Prozesses   
    	\pgfpathmoveto{\pgfpoint{\pgf@xa}{\pgf@ya}}
    	\pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@yb}}
    	\pgfpathlineto{\pgfpoint{\pgf@xb*0.75}{\pgf@yb}}
    	\pgfpathlineto{\pgfpoint{\pgf@xb}{0}}
    	\pgfpathlineto{\pgfpoint{\pgf@xb*0.75}{\pgf@ya}}
    		
    	%~~ Erzeugen des Pfades und Setzen der Hintergrundfarbe
    	\pgfusepath{fill,stroke}
    	
    	%~~ Abschluss des Pfades
    	\pgfpathclose  	    			
 	}
}

%~~ Dekomponierbarer Prozess
\pgfdeclareshape{decompositionprocess}{
    %~~ Übernahme der Anchors aus dem
    %~~ Rechteck
	\inheritsavedanchors[from=unspecifiedprocess]  	        
	\inheritanchorborder[from=unspecifiedprocess] 
	\inheritanchor[from=unspecifiedprocess]{center} 
	\inheritanchor[from=unspecifiedprocess]{north}
 	\inheritanchor[from=unspecifiedprocess]{south} 
	\inheritanchor[from=unspecifiedprocess]{west} 
	\inheritanchor[from=unspecifiedprocess]{east}
            
	%~~ Hintergrundpfad des unspezifizierten Prozesses erben
	\inheritbackgroundpath[from=unspecifiedprocess]

    %~~ Erzeugen der Dekompositionshierarchie innerhalb des Prozesses
    \beforebackgroundpath{
        \southwest \pgf@xa=\pgf@x \pgf@ya=\pgf@y
		\northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y
		
		%~~ Linienfarbe
    	\pgfsetcolor{border}
    	
    	%~~ Hintergrund    	
    	\pgfsetfillcolor{beige}
    	
    	%~~ Linienstärke
    	\pgfsetlinewidth{0.75pt}
    	
    	%~~ Zentraler Prozess
    	\pgfpathmoveto{\pgfpoint{\pgf@xb*0.2}{\pgf@yb*0.85}}
    	\pgflineto{\pgfpoint{\pgf@xb*0.45}{\pgf@yb*0.85}}
    	\pgflineto{\pgfpoint{\pgf@xb*0.52}{\pgf@yb*0.55}}
    	\pgflineto{\pgfpoint{\pgf@xb*0.45}{\pgf@yb*0.25}}
    	\pgflineto{\pgfpoint{\pgf@xb*0.2}{\pgf@yb*0.25}}
    	\pgflineto{\pgfpoint{\pgf@xb*0.2}{\pgf@yb*0.85}}

        %~~ Linker Prozess
    	\pgfpathmoveto{\pgfpoint{\pgf@xb*0}{\pgf@yb*-0.2}}
    	\pgflineto{\pgfpoint{\pgf@xb*0.25}{\pgf@yb*-0.2}}
    	\pgflineto{\pgfpoint{\pgf@xb*0.32}{\pgf@yb*-0.5}}
    	\pgflineto{\pgfpoint{\pgf@xb*0.25}{\pgf@yb*-0.8}}
    	\pgflineto{\pgfpoint{\pgf@xb*0}{\pgf@yb*-0.8}}
    	\pgflineto{\pgfpoint{\pgf@xb*0}{\pgf@yb*-0.2}}
    	
    	%~~ Rechter Prozess
        \pgfpathmoveto{\pgfpoint{\pgf@xb*0.4}{\pgf@yb*-0.2}}
    	\pgflineto{\pgfpoint{\pgf@xb*0.65}{\pgf@yb*-0.2}}
    	\pgflineto{\pgfpoint{\pgf@xb*0.72}{\pgf@yb*-0.5}}
    	\pgflineto{\pgfpoint{\pgf@xb*0.65}{\pgf@yb*-0.8}}
    	\pgflineto{\pgfpoint{\pgf@xb*0.4}{\pgf@yb*-0.8}}
    	\pgflineto{\pgfpoint{\pgf@xb*0.4}{\pgf@yb*-0.2}}
    	    	
    	%~~ Dekompositionslinien
    	\pgfpathmoveto{\pgfpoint{\pgf@xb*0.36}{\pgf@yb*0.2}}
    	\pgflineto{\pgfpoint{\pgf@xb*0.36}{\pgf@yb*0.05}}
    	
    	\pgfpathmoveto{\pgfpoint{\pgf@xb*0.16}{\pgf@yb*0.05}}
    	\pgflineto{\pgfpoint{\pgf@xb*0.56}{\pgf@yb*0.05}}
    	
        \pgfpathmoveto{\pgfpoint{\pgf@xb*0.16}{\pgf@yb*0.05}}
        \pgflineto{\pgfpoint{\pgf@xb*0.16}{\pgf@yb*-0.1}}
        
        \pgfpathmoveto{\pgfpoint{\pgf@xb*0.56}{\pgf@yb*0.05}}
        \pgflineto{\pgfpoint{\pgf@xb*0.56}{\pgf@yb*-0.1}}
    	
    	%~~ Erzeugen der Pfade und Setzen der Hintergrundfarben
    	\pgfusepath{stroke,fill}
    	
    	%~~ Abschluss des Pfades
    	\pgfpathclose
    }
}

%~~ ######################################
%~~ SYNCHRONISATION
%~~ ######################################

%~~ Generisches Notationssymbol für die Synchronisierung
\pgfdeclareshape{sync}{
    %~~ Übernahme der Anchors aus dem
    %~~ Rechteck
	\inheritsavedanchors[from=rectangle]  	        
	\inheritanchorborder[from=rectangle] 
	\inheritanchor[from=rectangle]{center} 
	\inheritanchor[from=rectangle]{north}
 	\inheritanchor[from=rectangle]{south} 
	\inheritanchor[from=rectangle]{west} 
	\inheritanchor[from=rectangle]{east}
            
	%~~ Hintergrundpfad des Synchronisationssymbols
	\backgroundpath{
        %~~ Speichern der Werte der Anker in den 
        %~~ temporären PGF Registern xa,ya und xb und yb
		\southwest \pgf@xa=\pgf@x \pgf@ya=\pgf@y
		\northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y
		
		%~~ Farbe der Kantenlinien		
		\pgfsetcolor{syncedge}
		
		%~~ Hintergrund		
		\pgfsetfillcolor{syncfill}
			
		\pgfsetlinewidth{0.75pt}
		\pgfpathmoveto{\pgfpoint{\pgf@xb*0}{\pgf@yb}}
    	\pgflineto{\pgfpoint{\pgf@xb}{\pgf@yb*0}}
    	\pgflineto{\pgfpoint{\pgf@xb*0}{\pgf@ya}}
    	\pgflineto{\pgfpoint{\pgf@xa}{\pgf@yb*0}}
        \pgflineto{\pgfpoint{\pgf@xb*0}{\pgf@yb}}
    		
    	%~~ Erzeugen des Pfades und Setzen der Hintergrundfarbe
    	\pgfusepath{stroke,fill}
    	
    	%~~ Abschluss des Pfades
    	\pgfpathclose  	    			
 	}
}

%~~ Notationssymbols zur Synchronisation nach Beendigung aller Prozesse
\pgfdeclareshape{andsync}{
    %~~ Übernahme der Anchors aus dem
    %~~ Rechteck
	\inheritsavedanchors[from=sync]  	        
	\inheritanchorborder[from=sync] 
	\inheritanchor[from=sync]{center} 
	\inheritanchor[from=sync]{north}
 	\inheritanchor[from=sync]{south} 
	\inheritanchor[from=sync]{west} 
	\inheritanchor[from=sync]{east}
            
	%~~ Hintergrundpfad des generischen Synchronisationssymbols
	%~~ erben
	\inheritbackgroundpath[from=sync]
    
    %~~ Erzeugen des Texts AND im Notationssymbl
    \beforebackgroundpath{
        %~~ Speichern der Werte der Anker in den 
        %~~ temporären PGF Registern xa,ya und xb und yb
	    \southwest \pgf@xa=\pgf@x \pgf@ya=\pgf@y
	    \northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y
	    
	    %~~ Farbe der Kantenlinien		
		\pgfsetcolor{text}
	
	    %~~ Erzeugen des Textes AND innerhalb des Symbols
	    \pgftext[left, x=\pgf@xb*-0.5, y=\pgf@yb*0]{\textsf{\fontsize{1}{5}\selectfont AND}}
    }	
}

%~~ Notationssymbol zur Synchronisation nach Beendigung des ersten Prozesses 
\pgfdeclareshape{orsync}{
    %~~ Übernahme der Anchors aus dem
    %~~ Rechteck
	\inheritsavedanchors[from=sync]  	        
	\inheritanchorborder[from=sync] 
	\inheritanchor[from=sync]{center} 
	\inheritanchor[from=sync]{north}
 	\inheritanchor[from=sync]{south} 
	\inheritanchor[from=sync]{west} 
	\inheritanchor[from=sync]{east}
            
	%~~ Hintergrundpfad des generischen Synchronisationssymbols
	%~~ erben
	\inheritbackgroundpath[from=sync]
    
    %~~ Erzeugen des Texts AND im Notationssymbl
    \beforebackgroundpath{
        %~~ Speichern der Werte der Anker in den 
        %~~ temporären PGF Registern xa,ya und xb und yb
	    \southwest \pgf@xa=\pgf@x \pgf@ya=\pgf@y
	    \northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y
	    
	    %~~ Farbe der Kantenlinien		
		\pgfsetcolor{text}
	
	    %~~ Erzeugen des Textes AND innerhalb des Symbols
	    \pgftext[left, x=\pgf@xb*-0.5, y=\pgf@yb*0]{\textsf{\fontsize{7}{5}\selectfont OR}}
    }	
}



%~~ ######################################
%~~ VERBINDUNGSSTÜCKE
%~~ ######################################

%~~ Verbindungsstück für die parallele Prozessausführung
\pgfdeclareshape{paraconn}{
    %~~ Übernahme der Anchors aus dem
    %~~ Rechteck
	\inheritsavedanchors[from=rectangle]  	        
	\inheritanchorborder[from=rectangle] 
	\inheritanchor[from=rectangle]{center} 
	\inheritanchor[from=rectangle]{north}
 	\inheritanchor[from=rectangle]{south} 
	\inheritanchor[from=rectangle]{west} 
	\inheritanchor[from=rectangle]{east}
            
	%~~ Hintergrundpfad des Basisprozesses
	\backgroundpath{
        %~~ Speichern der Werte der Anker in den 
        %~~ temporären PGF Registern xa,ya und xb und yb
        \southwest \pgf@xa=\pgf@x \pgf@ya=\pgf@y
        \northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y
                
        \pgfsetlinewidth{0.75pt}
        %~~ Erzeugen des Verbindungsstückes für die
        %~~ parallele Ausführung von Prozessen  
        \pgfpathmoveto{\pgfpoint{\pgf@xb*1}{\pgf@ya}}
        \pgfpathlineto{\pgfpoint{\pgf@xb*1}{\pgf@yb}}
        
        \pgfpathmoveto{\pgfpoint{\pgf@xb*1}{\pgf@yb*0}}
        \pgfpathlineto{\pgfpoint{\pgf@xb*-1}{\pgf@yb*0}}
        
        %~~ Erzeugen der doppelten Linien
        \pgfpathmoveto{\pgfpoint{\pgf@xb*-0.8}{\pgf@yb*0.4}}
        \pgflineto{\pgfpoint{\pgf@xb*-0.1}{\pgf@yb*0.4}}
        \pgfpathmoveto{\pgfpoint{\pgf@xb*-0.8}{\pgf@yb*-0.4}}
        \pgflineto{\pgfpoint{\pgf@xb*-0.1}{\pgf@yb*-0.4}}
                    
        %~~ Erzeugen des Pfades und Setzen der Hintergrundfarbe
        \pgfusepath{stroke}
        
        %~~ Abschluss des Pfades
        \pgfpathclose               	    			
 	}
}

%~~ ######################################
%~~ ITERATIONEN
%~~ ######################################
%~~ Verbindungsstück für die parallele Prozessausführung
\pgfdeclareshape{iterationstart}{
    %~~ Die Anchor werden aus dem Basisshape für Events
    %~~ geerbt
    \inheritsavedanchors[from=rectangle]            
    \inheritanchorborder[from=rectangle] 
    \inheritanchor[from=rectangle]{center} 
    \inheritanchor[from=rectangle]{north}
    \inheritanchor[from=rectangle]{south} 
    \inheritanchor[from=rectangle]{west} 
    \inheritanchor[from=rectangle]{east}

    
    
    %~~ Hintergrundpfad des Iterationsstartsymbols
    \backgroundpath{
        %~~ Speichern der Werte der Anker in den 
        %~~ temporären PGF Registern xa,ya und xb und yb
        \southwest \pgf@xa=\pgf@x \pgf@ya=\pgf@y
        \northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y
                
                                    
        %~~ Erzeugen des grünen Quadrats
        \pgfpathmoveto{\pgfpoint{\pgf@xa}{\pgf@yb}}   
        \pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@ya}}
        \pgfpathlineto{\pgfpoint{\pgf@xb}{\pgf@ya}}
        \pgfpathlineto{\pgfpoint{\pgf@xb}{\pgf@yb}}
        \pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@yb}}        
                                
        %~~ Setzen der Farbe
        \pgfusepath{stroke,fill}    
                
        %~~ Abschluss des Pfades        
        \pgfpathclose       
    } 
    
    %~~ Pfad des weißen Pfeils
    \beforebackgroundpath{
        %~~ Speichern der Werte der Anker in den 
        %~~ temporären PGF Registern xa,ya und xb und yb
        \southwest \pgf@xa=\pgf@x \pgf@ya=\pgf@y
        \northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y
        
        \pgfsetcolor{iterationarrow}
        
        \pgfpathmoveto{\pgfpoint{\pgf@xa*0.4}{\pgf@yb*0.55}}
        \pgfpathlineto{\pgfpoint{\pgf@xb*0.6}{\pgf@ya*0}}
        \pgfpathlineto{\pgfpoint{\pgf@xa*0.4}{\pgf@ya*0.55}}
        \pgfpathlineto{\pgfpoint{\pgf@xa*0.4}{\pgf@yb*0.55}}
        
        \pgfusepath{stroke,fill}
        
        \pgfpathclose
    }   
}

%~~ Generisches Notationssymbol für die Darstellung einer Iteration
%~~ (Verschlungene Pfeile
\pgfdeclareshape{iteration}{
    %~~ Übernahme der Anchors aus dem
    %~~ Rechteck
    \inheritsavedanchors[from=rectangle]            
    \inheritanchorborder[from=rectangle] 
    \inheritanchor[from=rectangle]{center} 
    \inheritanchor[from=rectangle]{north}
    \inheritanchor[from=rectangle]{south} 
    \inheritanchor[from=rectangle]{west} 
    \inheritanchor[from=rectangle]{east}
            
    %~~ Hintergrundpfad des Basisprozesses
    \backgroundpath{
        %~~ Speichern der Werte der Anker in den 
        %~~ temporären PGF Registern xa,ya und xb und yb
        \southwest \pgf@xa=\pgf@x \pgf@ya=\pgf@y
        \northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y
            
        %~~ Mittlere Linie des Shapes       
        \pgfpathmoveto{\pgfpoint{\pgf@xa}{\pgf@yb*0}}
        \pgfpathlineto{\pgfpoint{\pgf@xb}{\pgf@yb*0}}
        \pgfusepath{stroke}
        \pgfpathclose
        
        %~~ Kreis
        \begin{pgfscope}
            \pgfpathmoveto{\pgfpoint{6}{\pgf@yb*0.82}}
            \pgfsetlinewidth{4pt}
            \pgfsetinnerlinewidth{2.7pt}
            \pgfarc{0}{360}{1.5ex}
            \pgfusepath{stroke}
            %~~ Abschluss des Pfades
            \pgfpathclose
        \end{pgfscope}
        
        %~~ Linker Pfeil
        \begin{pgfscope}
            \pgfsetroundcap
            \pgfsetlinewidth{0.6pt}
            \color{white}   
            \pgfsetstrokecolor{black}
            \pgfpathmoveto{\pgfpoint{-10}{6}}
            \pgflineto{\pgfpoint{-4}{9}}    
            \pgflineto{\pgfpoint{-5}{4}}
            \pgflineto{\pgfpoint{-10}{6}}
            
            \pgfusepath{fill, stroke}
            \pgfpathclose
        \end{pgfscope}
        
        \begin{pgfscope}
            \color{white}
            \pgfsetlinewidth{1.1pt}
            \pgfpathmoveto{\pgfpoint{-7.9}{7}}
            \pgflineto{\pgfpoint{-5.4}{8.1}}    
            \pgfusepath{stroke}
            \pgfpathclose
        \end{pgfscope}
        
        %~~ Rechter Pfeil
        \begin{pgfscope}
            \pgfsetroundcap
            \pgfsetlinewidth{0.6pt}
            \color{white}   
            \pgfsetstrokecolor{black}
            \pgfpathmoveto{\pgfpoint{3}{9}}
            \pgflineto{\pgfpoint{8}{13}}    
            \pgflineto{\pgfpoint{3}{14.5}}
            \pgflineto{\pgfpoint{3}{9}}
            
            \pgfusepath{fill, stroke}
            \pgfpathclose
        \end{pgfscope}
        
        \begin{pgfscope}
            \color{white}
            \pgfsetlinewidth{1.1pt}
            \pgfpathmoveto{\pgfpoint{4.5}{10}}
            \pgflineto{\pgfpoint{6.5}{12}}  
            \pgfusepath{stroke}
            \pgfpathclose
        \end{pgfscope}                              
    }
 }

%~~ ######################################
%~~ AUSNAHMEN
%~~ ######################################
%~~ Nicht spezifizierte Ausnahme
\pgfdeclareshape{unspecifiedexception}{
    %~~ Übernahme der Anchors aus dem
    %~~ Rechteck
    \inheritsavedanchors[from=rectangle]            
    \inheritanchorborder[from=rectangle] 
    \inheritanchor[from=rectangle]{center} 
    \inheritanchor[from=rectangle]{north}
    \inheritanchor[from=rectangle]{south}  
    \inheritanchor[from=rectangle]{west}
    \inheritanchor[from=rectangle]{east}
            
    %~~ Hintergrundpfad des Basisprozesses
    \backgroundpath{
        %~~ Speichern der Werte der Anker in den 
        %~~ temporären PGF Registern xa,ya und xb und yb
        \southwest \pgf@xa=\pgf@x \pgf@ya=\pgf@y
        \northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y      
                        
        \pgfsetlinewidth{0.7pt}
                
        \begin{pgfscope}
            \pgfsetfillcolor{fillorange}
            \pgfpathmoveto{\pgfpoint{\pgf@xa}{\pgf@ya}}
            \pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@yb*1.1}}
            \pgfpathlineto{\pgfpoint{\pgf@xb}{\pgf@yb*1.1}}
            \pgfpathlineto{\pgfpoint{\pgf@xb}{\pgf@ya}}
            \pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@ya}} 
            \pgfusepath{fill}
        \end{pgfscope}
        
        \begin{pgfscope}
           \pgfsetcolor{black}
            \pgfsetfillcolor{fillorange}            
            \pgfpathmoveto{\pgfpoint{\pgf@xa}{\pgf@yb*0.8}}
            \pgfpathcurveto{\pgfpoint{\pgf@xa*-0.9}{\pgf@yb*2.3}}{\pgfpoint{\pgf@xb*1.1}{\pgf@yb*2.3}}{\pgfpoint{\pgf@xb}{\pgf@yb*0.8}} 
            \pgfusepath{fill, stroke}    
        \end{pgfscope}
            
        \begin{pgfscope}                
            \pgfpathmoveto{\pgfpoint{\pgf@xa}{\pgf@ya}}
            \pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@yb*0.8}} 
            
            \pgfpathmoveto{\pgfpoint{\pgf@xb}{\pgf@ya}}
            \pgfpathlineto{\pgfpoint{\pgf@xb}{\pgf@yb*0.8}}     
            
            %~~ Erzeugen des Pfades und Setzen der Hintergrundfarbe
            \pgfusepath{stroke, fill}
        \end{pgfscope}

        \begin{pgfscope}
            \pgfsetfillcolor{bottomgrey}
            \pgfpathmoveto{\pgfpoint{\pgf@xa}{\pgf@ya}}
            \pgfsetcornersarced{\pgfpoint{0.18pt}{0.5pt}}
            \pgfpathrectanglecorners{\pgfpoint{\pgf@xa*-0.5}{\pgf@ya*0.9}}{\pgfpoint{\pgf@xa*1.8}{\pgf@ya*1.6}}       
           \pgfusepath{stroke, fill}
        \end{pgfscope}

        %~~ Erzeugen des weißen Bogens im Notationssymbol
        \begin{pgfscope}           
            %~~ Definition der Linienstärke und Farbe für alle
            %~~ folgenden Scopes
            \pgfsetlinewidth{0.2pt}         
            \pgfsetstrokecolor{white}
            
            \begin{pgfscope}            
                \pgfpathmoveto{\pgfpoint{\pgf@xb*0.3}{\pgf@yb*1.4}}
                \pgfpathquadraticcurveto{\pgfpoint{\pgf@xb*1.3}{\pgf@yb*-3.5}}{\pgfpoint{\pgf@xb*0.7}{\pgf@ya*0.4}}
                \pgfusepath{stroke}
            \end{pgfscope}
            
            \begin{pgfscope}            
                \pgfpathmoveto{\pgfpoint{\pgf@xb*0.3}{\pgf@yb*1.4}}
                \pgfpathquadraticcurveto{\pgfpoint{\pgf@xb*1.3}{\pgf@yb*-3.5}}{\pgfpoint{\pgf@xb*0.67}{\pgf@ya*0.4}}
                \pgfusepath{stroke}
            \end{pgfscope}
            
            \begin{pgfscope}      
                \pgfpathmoveto{\pgfpoint{\pgf@xb*0.3}{\pgf@yb*1.4}}
                \pgfpathquadraticcurveto{\pgfpoint{\pgf@xb*1.3}{\pgf@yb*-3.5}}{\pgfpoint{\pgf@xb*0.65}{\pgf@ya*0.4}}
                \pgfusepath{stroke}
            \end{pgfscope}
            
            \begin{pgfscope}
                \pgfpathmoveto{\pgfpoint{\pgf@xb*0.3}{\pgf@yb*1.4}}
                \pgfpathquadraticcurveto{\pgfpoint{\pgf@xb*1.3}{\pgf@yb*-3.5}}{\pgfpoint{\pgf@xb*0.63}{\pgf@ya*0.4}}
                \pgfusepath{stroke}
            \end{pgfscope}
            
            \begin{pgfscope}
                \pgfpathmoveto{\pgfpoint{\pgf@xb*0.3}{\pgf@yb*1.4}}
                \pgfpathquadraticcurveto{\pgfpoint{\pgf@xb*1.3}{\pgf@yb*-3.5}}{\pgfpoint{\pgf@xb*0.61}{\pgf@ya*0.4}}
                \pgfusepath{stroke}
            \end{pgfscope}
            
            \begin{pgfscope}
                \pgfpathmoveto{\pgfpoint{\pgf@xb*0.3}{\pgf@yb*1.4}}
                \pgfpathquadraticcurveto{\pgfpoint{\pgf@xb*1.3}{\pgf@yb*-3.5}}{\pgfpoint{\pgf@xb*0.59}{\pgf@ya*0.4}}
                \pgfusepath{stroke}
            \end{pgfscope}
            
            \begin{pgfscope}
                \pgfpathmoveto{\pgfpoint{\pgf@xb*0.3}{\pgf@yb*1.4}}
                \pgfpathquadraticcurveto{\pgfpoint{\pgf@xb*1.3}{\pgf@yb*-3.5}}{\pgfpoint{\pgf@xb*0.57}{\pgf@ya*0.4}}
                \pgfusepath{stroke}
            \end{pgfscope}
            
            \begin{pgfscope}
                \pgfpathmoveto{\pgfpoint{\pgf@xb*0.3}{\pgf@yb*1.4}}
                \pgfpathquadraticcurveto{\pgfpoint{\pgf@xb*1.3}{\pgf@yb*-3.5}}{\pgfpoint{\pgf@xb*0.55}{\pgf@ya*0.4}}
                \pgfusepath{stroke}
            \end{pgfscope}
            
            \begin{pgfscope}
                \pgfpathmoveto{\pgfpoint{\pgf@xb*0.3}{\pgf@yb*1.4}}
                \pgfpathquadraticcurveto{\pgfpoint{\pgf@xb*1.3}{\pgf@yb*-3.5}}{\pgfpoint{\pgf@xb*0.53}{\pgf@ya*0.4}}
                \pgfusepath{stroke}
            \end{pgfscope}
        \end{pgfscope}

    	
    	%~~ Abschluss des Pfades
    	\pgfpathclose  	    			
 	}
}

%~~ ######################################
%~~ Entscheidungstypen
%~~ ######################################
%~~ Nicht spezifizerte Entscheidung
\pgfdeclareshape{unspecifieddecision}{
    %~~ Übernahme der Anchors aus dem
    %~~ Rechteck
    \inheritsavedanchors[from=rectangle]            
    \inheritanchorborder[from=rectangle] 
    \inheritanchor[from=rectangle]{center} 
    \inheritanchor[from=rectangle]{north}
    \inheritanchor[from=rectangle]{south}  
    \inheritanchor[from=rectangle]{west}
    \inheritanchor[from=rectangle]{east}
            
    %~~ Hintergrundpfad des Basisprozesses
    \backgroundpath{
        %~~ Speichern der Werte der Anker in den 
        %~~ temporären PGF Registern xa,ya und xb und yb
        \southwest \pgf@xa=\pgf@x \pgf@ya=\pgf@y
        \northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y
        
        \pgfsetcolor{decisiongrey}
        
        \begin{pgfscope}
            \pgfsetcolor{decisiongrey}        
            \pgfpathcircle{\pgfpoint{\pgf@xb*0}{\pgf@yb*0}}{\pgf@xb}
            \pgfusepath{stroke,fill} 
        \end{pgfscope}
        
        %~~ Abschluss des Pfades
        \pgfpathclose                   
    }
}


\makeatother

%~~ Ende des Paketes
\endinput