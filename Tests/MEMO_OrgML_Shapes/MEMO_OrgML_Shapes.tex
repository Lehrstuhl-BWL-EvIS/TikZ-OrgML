\documentclass[border=20pt]{standalone}
\usepackage[utf8]{inputenc}
\usepackage[ngerman]{babel}

%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
%~~ Laden von TikZ
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
\usepackage{tikz}

%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
%~~  __  __ ___ __  __  ___     ___           __  __ _    
%~~ |  \/  | __|  \/  |/ _ \   / _ \ _ _ __ _|  \/  | |   
%~~ | |\/| | _|| |\/| | (_) | | (_) | '_/ _` | |\/| | |__ 
%~~ |_|  |_|___|_|  |_|\___/   \___/|_| \__, |_|  |_|____|
%~~                                     |___/             
%~~  ___ _                      
%~~ / __| |_  __ _ _ __  ___ ___
%~~ \__ \ ' \/ _` | '_ \/ -_|_-<
%~~ |___/_||_\__,_| .__/\___/__/
%~~               |_|   
%~~
%~~ Definition der MEMO OrgML Notationssymbole als Shapes für TikZ Nodes
%~~
%~~ ##########################################################################
%~~ ToDo-Liste:
%~~         ToDo Größe der Shapes dynamisch berechnen?
%~~         ToDo Auslagerung der Shapes und Macros in ein *.sty-File
%~~         ToDo Anpassung der Darstellung der Gabelung (parallele Ausführung)
%~~         ToDo Beginn der ausgehenden Linie beim Prozessshape
%~~         ToDo Zusammenführung der Äste des Baumes
%~~         ToDo Implementierung Shape für Informationszustandsänderung
%~~         ToDo Macro für Kindknoten im Baum
%~~         ToDo Einfügen von Text zu den Shapes 
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
%~~ TikZ-Libraries
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
\usetikzlibrary{trees}

%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
%~~ Farben
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
\definecolor{event}{RGB}{198,212,220}
\definecolor{startevent}{RGB}{162,180,0}
\definecolor{endevent}{RGB}{200,0,52}

%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
%~~ TikZ-Styles
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
%~~ ######################################
%~~ EREIGNISSE
%~~ ######################################
\tikzset{
    event/.style={
        draw,
        inner sep=3ex,
        color=event
    }
}

\tikzset{
    startevent/.style={
        event,
        color=startevent
    }
}

\tikzset{
    endevent/.style={
        event,
        color=endevent
    }
}

\tikzset{
    msgevent/.style={
        event
    }
}

%~~ ######################################
%~~ PROZESSE
%~~ ######################################
\tikzset{
    unspecprocess/.style={
        draw,
        inner sep=2.5ex,
        text width=5em,
        level distance=6ex,
        sibling distance=10ex
    }
}

\tikzset{
    decompprocess/.style={
        unspecprocess
    }
}

%~~ Textnodes
\tikzset{
    memotext/.style={
        below,
        align=center,
        font=\footnotesize\sffamily        
    }
}

%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
%~~ Definition der MEMO OrgML-Shapes
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

\makeatletter
%~~ ######################################
%~~ EREIGNISSE
%~~ ######################################

%~~ Basisereignis
\pgfdeclareshape{event}{
    %~~ Übernahme der Anchor aus dem standard Rechteck
    %~~ Shape
    \inheritsavedanchors[from=rectangle]  	        
	\inheritanchorborder[from=rectangle] 
	\inheritanchor[from=rectangle]{center} 
	\inheritanchor[from=rectangle]{north}
 	\inheritanchor[from=rectangle]{south} 
	\inheritanchor[from=rectangle]{west} 
	\inheritanchor[from=rectangle]{east}

    
    %~~ Hintergrundpfad des Basisereignisses       
	\backgroundpath{
        %~~ Speichern der Werte der Anker in den 
        %~~ temporären PGF Registern xa,ya und xb und yb
	    \southwest \pgf@xa=\pgf@x \pgf@ya=\pgf@y
	    \northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y
			    
									
        %~~ Erzeugen der äußeren Kanten des Notationssymbols
        %~~ mit Hilfe eines Path (Dreieck}
        \pgfpathmoveto{\pgfpoint{\pgf@xa}{\pgf@yb}}   
        \pgfpathlineto{\pgfpoint{\pgf@xb}{\pgf@yb}}
        \pgfpathlineto{\pgfpoint{\pgf@xb*0}{\pgf@ya}}
        \pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@yb}}
    	    	    			
    	%~~ Erzeugen des Pfades
    	\pgfusepath{stroke} 	
    			
    	%~~ Abschluss des Pfades   		
    	\pgfpathclose  	    				
    }
}

%~~ Bezeichner für spezielle Ereignisse:
%~~ ?????event, z.B. startevent, endevent, etc.

%~~ Startereignis
\pgfdeclareshape{startevent}{
    %~~ Die Anchor werden aus dem Basisshape für Events
    %~~ geerbt
	\inheritsavedanchors[from=event]  	        
	\inheritanchorborder[from=event] 
	\inheritanchor[from=event]{center} 
	\inheritanchor[from=event]{north}
 	\inheritanchor[from=event]{south} 
	\inheritanchor[from=event]{west} 
	\inheritanchor[from=event]{east}
	
	
	%~~ Erben des Hintergrundpfades aus dem Basisshape
	%~~ für Events
	\inheritbackgroundpath[from=event]
	
	%~~ Erzeugen des Textes "START" überhalb des Events
	\beforebackgroundpath{
	    %~~ Speichern der Werte der Anker in den 
        %~~ temporären PGF Registern xa,ya und xb und yb
	    \southwest \pgf@xa=\pgf@x \pgf@ya=\pgf@y
	    \northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y
	
	    %~~ Erzeugen des Textes über dem Dreieck
	    %~~ Die Positionierung erfolgt dabei relativ zu den Ankern
    	\pgftext[left, x=\pgf@xb*-.2, y=\pgf@yb*1.25]{\textsf{\fontsize{1}{5}\selectfont START}}
	}
}

\pgfdeclareshape{endevent}{
    %~~ Die Anchor werden aus dem Basisshape für Events
    %~~ geerbt
	\inheritsavedanchors[from=event]  	        
	\inheritanchorborder[from=event] 
	\inheritanchor[from=event]{center} 
	\inheritanchor[from=event]{north}
 	\inheritanchor[from=event]{south} 
	\inheritanchor[from=event]{west} 
	\inheritanchor[from=event]{east}
	
	
	%~~ Erben des Hintergrundpfades aus dem Basisshape
	%~~ für Events
	\inheritbackgroundpath[from=event]
	
	%~~ Erzeugen des Textes "STOP" überhalb des Events
	\beforebackgroundpath{
	    %~~ Speichern der Werte der Anker in den 
        %~~ temporären PGF Registern xa,ya und xb und yb
	    \southwest \pgf@xa=\pgf@x \pgf@ya=\pgf@y
	    \northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y
	
	    %~~ Erzeugen des Textes über dem Dreieck
	    %~~ Die Positionierung erfolgt dabei relativ zu den Ankern
    	\pgftext[left, x=\pgf@xb*-.1, y=\pgf@yb*1.25]{\textsf{\fontsize{1}{5}\selectfont STOP}}
	}
}

\pgfdeclareshape{msgevent}{
    %~~ Die Anchor werden aus dem Basisshape für Events
    %~~ geerbt
	\inheritsavedanchors[from=event]  	        
	\inheritanchorborder[from=event] 
	\inheritanchor[from=event]{center} 
	\inheritanchor[from=event]{north}
 	\inheritanchor[from=event]{south} 
	\inheritanchor[from=event]{west} 
	\inheritanchor[from=event]{east}
	
	
	%~~ Erben des Hintergrundpfades aus dem Basisshape
	%~~ für Events
	\inheritbackgroundpath[from=event]
	
	%~~ Erzeugen des Briefumschlages 
	\beforebackgroundpath{
	    %~~ Speichern der Werte der Anker in den 
        %~~ temporären PGF Registern xa,ya und xb und yb
	    \southwest \pgf@xa=\pgf@x \pgf@ya=\pgf@y
	    \northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y
    	
    	%~~ Definition der Farben für den Briefumschlag und
    	%~~ den Hintergrund
    	\definecolor{black}{RGB}{20,18,21}
    	\pgfsetcolor{black}
    	%~~ Hintergrund
    	\pgfsetfillcolor{white}
    	
    	%~~ Rahmen für den Briefumschlag
    	\begin{pgfscope}
    	    %~~ Die äußere Linienstärke wird innerhalb des Scope
    	    %~~ definiert
    	    \pgfsetlinewidth{0.75pt}
    	    \pgfpathmoveto{\pgfpoint{\pgf@xb*-0.75}{\pgf@yb*0.75}}   
            \pgfpathlineto{\pgfpoint{\pgf@xb*0.75}{\pgf@yb*0.75}}
            \pgfpathlineto{\pgfpoint{\pgf@xb*0.75}{\pgf@yb*-0.35}}
            \pgfpathlineto{\pgfpoint{\pgf@xb*-0.75}{\pgf@yb*-0.35}}
            \pgfpathlineto{\pgfpoint{\pgf@xb*-0.75}{\pgf@yb*0.75}}
            \pgfusepath{stroke,fill}
        \end{pgfscope}
        
        %~~ Faltkanten des Briefumschlges
	    \pgfpathmoveto{\pgfpoint{\pgf@xb*-0.75}{\pgf@yb*0.75}}
	    \pgfpathlineto{\pgfpoint{\pgf@xb*0}{\pgf@yb*0.15}}
	    \pgfpathlineto{\pgfpoint{\pgf@xb*0.75}{\pgf@yb*0.75}}
	    
	    \pgfpathmoveto{\pgfpoint{\pgf@xb*-0.75}{\pgf@yb*-0.35}}
	    \pgfpathlineto{\pgfpoint{\pgf@xb*-0.15}{\pgf@yb*0.25}}
	    
	    \pgfpathmoveto{\pgfpoint{\pgf@xb*0.75}{\pgf@yb*-0.35}}
	    \pgfpathlineto{\pgfpoint{\pgf@xb*0.15}{\pgf@yb*0.25}}        
	    
    	\pgfusepath{stroke}
    	
    	\pgfpathclose
	}
}

%~~ Unspezifizierter Prozess
\pgfdeclareshape{unspecprocess}{
    %~~ Übernahme der Anchors aus dem
    %~~ Rechteck
	\inheritsavedanchors[from=rectangle]  	        
	\inheritanchorborder[from=rectangle] 
	\inheritanchor[from=rectangle]{center} 
	\inheritanchor[from=rectangle]{north}
 	\inheritanchor[from=rectangle]{south} 
	\inheritanchor[from=rectangle]{west} 
	\inheritanchor[from=rectangle]{east}
            
	%~~ Hintergrundpfad des Basisprozesses
	\backgroundpath{
        %~~ Speichern der Werte der Anker in den 
        %~~ temporären PGF Registern xa,ya und xb und yb
		\southwest \pgf@xa=\pgf@x \pgf@ya=\pgf@y
		\northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y
				
		%~~ Definition der Farbe für die Linien und
		%~~ den Hintergrund des Shapes
		\definecolor{background}{RGB}{198,212,220}
		\pgfsetcolor{background}
				
    	%~~ Erzeugen des Notationssymbols eines
    	%~~ unspezifierten Prozesses   
    	\pgfpathmoveto{\pgfpoint{\pgf@xa}{\pgf@ya}}
    	\pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@yb}}
    	\pgfpathlineto{\pgfpoint{\pgf@xb*0.75}{\pgf@yb}}
    	\pgfpathlineto{\pgfpoint{\pgf@xb}{0}}
    	\pgfpathlineto{\pgfpoint{\pgf@xb*0.75}{\pgf@ya}}
    		
    	%~~ Erzeugen des Pfades und Setzen der Hintergrundfarbe
    	\pgfusepath{fill,stroke}
    	
    	%~~ Abschluss des Pfades
    	\pgfpathclose  	    			
 	}
}

\pgfdeclareshape{decompprocess}{
    %~~ Übernahme der Anchors aus dem
    %~~ Rechteck
	\inheritsavedanchors[from=unspecprocess]  	        
	\inheritanchorborder[from=unspecprocess] 
	\inheritanchor[from=unspecprocess]{center} 
	\inheritanchor[from=unspecprocess]{north}
 	\inheritanchor[from=unspecprocess]{south} 
	\inheritanchor[from=unspecprocess]{west} 
	\inheritanchor[from=unspecprocess]{east}
            
	%~~ Hintergrundpfad des unspezifizierten Prozesses erben
	\inheritbackgroundpath[from=unspecprocess]

    %~~ Erzeugen der Dekompositionshierarchie innerhalb des Prozesses
    \beforebackgroundpath{
        \southwest \pgf@xa=\pgf@x \pgf@ya=\pgf@y
		\northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y
		
		%~~ Linienfarbe
    	\definecolor{black}{RGB}{20,18,21}
    	\pgfsetcolor{black}
    	
    	%~~ Hintergrund
    	\definecolor{beige}{RGB}{255,253,232}
    	\pgfsetfillcolor{beige}
    	
    	%~~ Linienstärke
    	\pgfsetlinewidth{0.75pt}
    	
    	%~~ Zentraler Prozess
    	\pgfpathmoveto{\pgfpoint{\pgf@xb*0.2}{\pgf@yb*0.85}}
    	\pgflineto{\pgfpoint{\pgf@xb*0.45}{\pgf@yb*0.85}}
    	\pgflineto{\pgfpoint{\pgf@xb*0.52}{\pgf@yb*0.55}}
    	\pgflineto{\pgfpoint{\pgf@xb*0.45}{\pgf@yb*0.25}}
    	\pgflineto{\pgfpoint{\pgf@xb*0.2}{\pgf@yb*0.25}}
    	\pgflineto{\pgfpoint{\pgf@xb*0.2}{\pgf@yb*0.85}}

        %~~ Linker Prozess
    	\pgfpathmoveto{\pgfpoint{\pgf@xb*0}{\pgf@yb*-0.2}}
    	\pgflineto{\pgfpoint{\pgf@xb*0.25}{\pgf@yb*-0.2}}
    	\pgflineto{\pgfpoint{\pgf@xb*0.32}{\pgf@yb*-0.5}}
    	\pgflineto{\pgfpoint{\pgf@xb*0.25}{\pgf@yb*-0.8}}
    	\pgflineto{\pgfpoint{\pgf@xb*0}{\pgf@yb*-0.8}}
    	\pgflineto{\pgfpoint{\pgf@xb*0}{\pgf@yb*-0.2}}
    	
    	%~~ Rechter Prozess
        \pgfpathmoveto{\pgfpoint{\pgf@xb*0.4}{\pgf@yb*-0.2}}
    	\pgflineto{\pgfpoint{\pgf@xb*0.65}{\pgf@yb*-0.2}}
    	\pgflineto{\pgfpoint{\pgf@xb*0.72}{\pgf@yb*-0.5}}
    	\pgflineto{\pgfpoint{\pgf@xb*0.65}{\pgf@yb*-0.8}}
    	\pgflineto{\pgfpoint{\pgf@xb*0.4}{\pgf@yb*-0.8}}
    	\pgflineto{\pgfpoint{\pgf@xb*0.4}{\pgf@yb*-0.2}}
    	    	
    	%~~ Dekompositionslinien
    	\pgfpathmoveto{\pgfpoint{\pgf@xb*0.36}{\pgf@yb*0.2}}
    	\pgflineto{\pgfpoint{\pgf@xb*0.36}{\pgf@yb*0.05}}
    	
    	\pgfpathmoveto{\pgfpoint{\pgf@xb*0.16}{\pgf@yb*0.05}}
    	\pgflineto{\pgfpoint{\pgf@xb*0.56}{\pgf@yb*0.05}}
    	
        \pgfpathmoveto{\pgfpoint{\pgf@xb*0.16}{\pgf@yb*0.05}}
        \pgflineto{\pgfpoint{\pgf@xb*0.16}{\pgf@yb*-0.1}}
        
        \pgfpathmoveto{\pgfpoint{\pgf@xb*0.56}{\pgf@yb*0.05}}
        \pgflineto{\pgfpoint{\pgf@xb*0.56}{\pgf@yb*-0.1}}
    	
    	%~~ Erzeugen der Pfade und Setzen der Hintergrundfarben
    	\pgfusepath{stroke,fill}
    	
    	%~~ Abschluss des Pfades
    	\pgfpathclose
    }
}

\makeatother

%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
%~~ LaTeX-Macros
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% Macroname: memonode
% Funktion:  Erzeugen eines MEMO OrgML Notationssymbols mit dem passenden
%            Shape, an der definierten Stelle mit dem definierten Text
% Parameter: #1: Name des zu verwendenden Shapes
%            #2: Name des Nodes der erzeugt wird
%            #3: x-Position
%            #4: y-Position
%            #5: Beschreibung des Ereignisses/Prozesses
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
\newcommand{\memonode}[5]{
    %~~ Erzeugen des Nodes der das Notationssymbol darstellt.
    %~~ Die Verwendung des richtigen Styles wird durch die Namensgleichheit
    %~~ des Styles und des Shapes erreicht.
    \node[#1, shape=#1] (#2) at (#3,#4) {};
        
    %~~ Erzeugen des Textes (Node) unterhalb des Notationssymbol der
    %~~ das Ereignis bzw. den Prozess beschreibt
    \node[memotext] at (#2.south) {#5};
}

%~~ Ende des Erweiterungspaketes



\begin{document}
\begin{tikzpicture}
%~~ Wurzelkonten --> Startevent
    \node[startevent, shape=startevent] (a) {}
    
        %~~ Aufspannen eines Baumes der nach rechts verläuft
        [edge from parent fork right, grow=right]            
        
        child { node[unspecprocess, shape=unspecprocess] (b) at (1,3) {} 
            child { node[msgevent, shape=msgevent] (d) at (1,0) {} 
                child { node[unspecprocess, shape=unspecprocess] (e) at (1.5,2) {} 
                    child { node[msgevent, shape=msgevent] (i) at (1,0) {} }
                }
                child { node[unspecprocess, shape=unspecprocess] (f) at (1.5,-2) {} 
                    child { node[msgevent, shape=msgevent] (j) at (1,0) {} }
                }
            }
        }        
        child { node[unspecprocess, shape=unspecprocess] (c) at (1,-3) {} 
            child { node[msgevent, shape=msgevent] (z) at (1,0) {}
                child { node[unspecprocess, shape=unspecprocess] (h) at (1.5,0) {} 
                    child { node[msgevent, shape=msgevent] (x) at (1,0) {} }
                }
            }
        };
\end{tikzpicture}
\end{document}